<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>focus-trap demo</title>
  <link rel="stylesheet" href="style.css">
  <meta name="description" content="A demo of focus-trap">
</head>
<body>
  <main>
    <h1 tabindex="0">focus-trap demo</h1>
    <p>
      <span aria-hidden="true" style="font-size:2em;vertical-align:middle;">☜</span>
      <a id="return-to-repo" href="https://github.com/focus-trap/focus-trap" style="vertical-align:middle;">Return to the repository</a>
    </p>
    <p>
      In the demos below, you'll be able to tell that a focus trap is active because it will turn pink. You should also be able to tell because it will trap your focus!
    </p>
    <p>
      When a trap is active, you can deactivate it by pushing its deactivate button or, if the demo allows, pressing the <kbd>Escape</kbd> key.
    </p>
    <p class="macos-keyboard-warning">
      Before you try the demos, if you're using <strong>macOS</strong>, make sure you
      have enabled <strong>keyboard navigation</strong> in order to use the Tab key to
      move focus between <strong>all controls</strong>.
    </p>
    <p>
      In Ventura (v13), you'll find this under <code>System Settings &gt; Keyboard</code>.
      Prior to Ventura, it may have been under <code>System Settings &gt; General</code>.
    </p>
    <p>
      FireFox and Safari, for example, respect this setting and without it enabled, you won't
      get a good experience. Chrome appears to ignore it (at least in v109). While focus-trap
      will still trap all the right nodes, the browser/OS will not let you access all tabbable
      nodes on the page, nor in any traps you activate, while using the Tab key.
    </p>

    <div id="demo-default">
      <h2 id="default-heading">default behavior</h2>
      <p>
        <button id="activate-default" aria-describedby="default-heading">
          activate trap
        </button>
      </p>
      <div id="default" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-default" aria-describedby="default-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/default.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-animated-dialog">
      <h2 id="animated-dialog-heading">animated dialog</h2>
      <p>
        This focus trap will fade in when activated and fade out when deactivated. Once the trap has been activated
        (i.e. <code>onPostActivate</code>), a "trap activated" message appears next to the Activate button.
        Note that the fade animation needs to be written yourself, it is not built into the library.
      </p>
      <p>
        <button id="activate-animated-dialog" aria-describedby="animated-dialog-heading">
          activate trap
        </button>
        <span id="animated-dialog-trap-activated" class="is-hidden">
          <strong>Trap activated</strong>
        </span>
      </p>
      <div id="animated-dialog" class="trap animated-dialog">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-animated-dialog" aria-describedby="animated-dialog-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/animated-dialog.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-animated-trigger">
      <h2 id="animated-trigger-heading">animated trigger</h2>
      <p>The activation button for this focus trap will fade out when the trap activates and fade in when the trap deactivates.</p>

      <p>If the <code>returnFocus</code> option is <code>true</code>, the activation button will receive focus after the trap deactivates.</p>

      <p>If the <code>returnFocus</code> option is <code>false</code>, the Deactivate button will retain focus after deactivation because that is the last element that was clicked prior to deactivation.</p>

      <p>Once the trap has been deactivated (i.e. <code>onPostDeactivate</code>), a "trap deactivated" message appears next to the "returnFocus" option.</p>

      <p>Note that the fade animation needs to be written yourself, it is not built into the library.</p>
      <p>
        <button id="activate-animated-trigger" class="animated-trigger" aria-describedby="animated-trigger-heading">
          activate trap
        </button>
        <label>
          <input id="animated-trigger-returnfocus" type="checkbox" checked />
          returnFocus (on deactivate)
        </label>
        <span id="animated-trigger-trap-deactivated" class="is-hidden">
          <strong>Trap deactivated</strong>
        </span>
      </p>
      <div id="animated-trigger" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-animated-trigger" aria-describedby="animated-trigger-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/animated-trigger.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-escape-deactivates">
      <h2 id="escape-deactivates-heading">configurable escape behavior</h2>
      <p>
        This focus trap leverages the <code>escapeDeactivates</code> option as a <code>function</code>
        rather than a boolean. By default, pressing ESC will deactivate the trap, but while the trap
        is active, you can check or uncheck the option, and the ESC key will behave accordingly.
      </p>
      <p>
        Since the <code>escapeDeactivates</code> option received the related <code>KeyboardEvent</code>,
        it could be used to programmatically decide if the ESC key should allow the trap to be
        deactivated, perhaps based on the node that's currently focused, or some other condition.
      </p>
      <p>
        <button id="activate-escape-deactivates" aria-describedby="escape-deactivates-heading">
          activate trap
        </button>
        <label>
          <input id="escape-deactivates-option" type="checkbox" checked />
          deactivate on ESC key
        </label>
      </p>
      <div id="escape-deactivates" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-escape-deactivates" aria-describedby="escape-deactivates-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/escape-deactivates.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-iene">
      <h2 id="iene-heading">initial element, no escape</h2>
      <p>
        If <code>initialFocus</code> is a selector or DOM node, focus will jump to that specified element when the trap activates.
      </p>
      <p>
        If <code>initialFocus</code> is <code>false</code> (or a function that returns <code>false</code>), no element will be given focus when the trap activates.
      </p>
      <p><code>initialFocus</code> is set to the first tabbable element by default.</p>
      <p>
        Also, in this demo the <kbd>Escape</kbd> key does not deactivate the focus trap. You must click the button.
      </p>
      <p>
        <label>
          Set <code>initialFocus</code> as:
          <select id="select-iene">
            <option value="#focused-input">#focused-input</option>
            <option value="false">false</option>
            <option value="function-false">function returns false</option>
          </select>
        </label>
      </p>
      <p>
        <button id="activate-iene" aria-describedby="iene-heading">
          activate trap
        </button>
      </p>
      <div id="iene" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <label for="focused-input" class="inline-label">
            Initially focused input
          </label>
          <input id="focused-input" />
        </p>
        <p>
          <button id="deactivate-iene" aria-describedby="iene-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/initial-element-no-escape.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-ifc">
      <h2 id="ifc-heading">initially focused container</h2>
      <p>
        When this focus trap activates, initial focus is on the containing element (which has <code>tabindex="-1"</code> and is therefore not tabbable).
        When you tab through the trap, focus does not return to the containing element.
      </p>
      <p>
        Also, clicking on an outside element automatically deactivates this trap.
      </p>
      <p>
        <button id="activate-ifc" aria-describedby="ifc-heading">
          activate trap
        </button>
      </p>
      <div id="ifc" class="trap" tabindex="-1">
        <p>
          <button>
            first
          </button>
        </p>
        <p>
          <button>
            second
          </button>
        </p>
        <p>
          <button id="deactivate-ifc" aria-describedby="ifc-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/initially-focused-container.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-ht">
      <h2 id="ht-heading">hidden treasures</h2>
      <p>
        Focusable nodes are initially hidden and then revealed within the trap.
      </p>
      <p>
        Use <b><kbd>Escape</kbd></b> to exit.
      </p>
      <p>
        <button id="activate-ht" aria-describedby="ht-heading">
          activate trap
        </button>
      </p>
      <div id="ht" class="trap" tabindex="-1">
        <p>
          <button>
            nothing
          </button>
        </p>
        <p>
          <button id="ht-show-more">
            click to show more
          </button>
        </p>
        <div id="ht-more" style="display:none;">
          <p>
            <button>
              nothing again
            </button>
          </p>
          <p>
            <button id="ht-show-less">
              click to show less
            </button>
          </p>
        </div>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/hidden-treasures.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-nested">
      <h2 id="nested-heading">nested</h2>
      <p>
        Nested focus traps.
      </p>
      <p>
        <button id="activate-nested" aria-describedby="nested-heading">
          activate trap
        </button>
      </p>
      <div id="nested" class="trap is-active" tabindex="-1" style="display:none;">
        <p>
          <button id="deactivate-nested" aria-describedby="nested-heading">
            deactivate outer trap
          </button>
        </p>
        <p>
          <button id="nested-activate-nested" aria-describedby="nested-heading">
            activate inner trap
          </button>
        </p>
        <div id="nested-nested" style="display:none;padding:5px 10px;">
          <p>
            <button>
              nothing
            </button>
          </p>
          <p>
            <button id="nested-deactivate-nested" aria-describedby="nested-heading">
              deactivate and close inner trap
            </button>
          </p>
        </div>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/nested.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-sibling">
      <h2 id="sibling-heading">sibling traps</h2>
      <p>
        Sibling focus traps. When the second trap is deactivated, focus returns to the first trap.
      </p>
      <div id="sibling-first" class="trap" tabindex="-1">
        <p>
          <button id="activate-first-sibling" aria-describedby="sibling-heading">
            activate first trap
          </button>
        </p>
        <p>
          <button id="deactivate-first-sibling" aria-describedby="sibling-heading">
            deactivate first trap
          </button>
        </p>
        <p>
          <button id="activate-second-sibling" aria-describedby="sibling-heading">
            activate second trap
          </button>
        </p>
      </div>
      <div id="sibling-second" class="trap is-active-nested" tabindex="-1" style="display: none;">
        <p>
          <button id="deactivate-second-sibling" aria-describedby="sibling-heading">
            deactivate second trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/sibling.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-tif">
      <h2 id="tif-heading">tricky initial focus</h2>
      <p>
        In this focus trap, the single focusable button is hidden (the ones you see at first have <code>tabindex="-1"</code>).
        If you activate the trap in this state, the <code>fallbackFocus</code> option is used to focus the container.
        If, however, you <em>first</em> make the focusable button visible by clicking "show focusable button", that button will receive focus when you activate the trap.
      </p>
      <p>
        <button id="activate-tif" aria-describedby="tif-heading">
          activate trap
        </button>
      </p>
      <div id="tif" class="trap" tabindex="-1">
        <p>
          <button id="deactivate-tif" tabindex="-1" aria-describedby="tif-heading">
            deactivate trap
          </button>
        </p>
        <p>
          <button id="tif-show-focusable" tabindex="-1">
            show focusable button
          </button>
        </p>
        <p>
          <button id="tif-hide-focusable" style="display:none;">
            hide focusable button
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/tricky-initial-focus.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-input-activation">
      <h2 id="input-activation-heading">input activation</h2>
      <p>
        Any change to the input content triggers automatic activation of the focus trap, without changing selection within the input.
      </p>
      <div id="input-activation" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <label for="focused-input8" class="inline-label">
            Initially focused input
          </label>
          <input id="focused-input8" />
        </p>
        <p>
          <button id="deactivate-input-activation" aria-describedby="input-activation-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/input-activation.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-delay">
      <h2 id="delay-heading">delay</h2>
      <p>
        focus-trap ensure that the placement of focus within the trap is slightly delayed, so the focused element does not capture the event that originated the activation of the focus trap. For example, the same <kbd>Enter</kbd> keystroke won't open <em>and</em> close this trap.
      </p>
      <p>
        <button id="activate-delay" aria-describedby="delay-heading">
          Reveal by pressing Enter
        </button>
      </p>

      <div id="delay" class="trap" style="opacity: 0.2;">
        <p>
          <button id="close-button-delay" aria-describedby="delay-heading">
            Hide
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/delay.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-no-delay">
      <h2 id="delay-heading-explicit">No delay</h2>
      <p>
        focus-trap ensure that the placement of focus within the trap is not delayed, so the focused element captures the event that originated the activation of the focus trap.
      </p>
      <p>
        <button id="activate-no-delay" aria-describedby="delay-heading-explicit">
          Reveal by pressing Enter
        </button>
      </p>

      <div id="no-delay" class="trap" style="opacity: 0.2;">
        <p>
          <button id="close-button-no-delay" aria-describedby="delay-heading-explicit">
            Hide
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/no-delay.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-radio">
      <h2 id="radio-heading">radio group</h2>
      <p>
        A default focus trap that contains a radio group. You should be able to change the radio group with the arrow keys, but <kbd>Tab</kbd> should only focus the active radio. (Notice that you need a checked radio in the group for things to work as expected.)
      </p>
      <p>
        <button id="activate-radio" aria-describedby="radio-heading">
          activate trap
        </button>
      </p>
      <div id="radio" class="trap">
        <fieldset>
          <legend>Radio group</legend>
          <div>
            <input type="radio" name="radio-set" id="radio-a" value="radio-a"> <label for="radio-a">a</label>
          </div><div>
            <input type="radio" name="radio-set" id="radio-b" value="radio-b" checked> <label for="radio-b">b</label>
          </div><div>
            <input type="radio" name="radio-set" id="radio-c" value="radio-c"> <label for="radio-c">c</label>
          </div>
        </fieldset>
        <p>
          <button id="deactivate-radio" aria-describedby="radio-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/radio.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-iframe">
      <h2 id="iframe-heading">iframe</h2>
      <p>
        This focus trap contains an iframe. You should be able to tab into and out of the iframe. But you need to have a focusable element before and after the iframe for things to work as expected.
      </p>
      <p>
        <button id="activate-iframe" aria-describedby="iframe-heading">
          activate trap
        </button>
      </p>
      <div id="iframe" class="trap">
        <p>
          <button>
            nothing
          </button>
        </p>
        <iframe src="./iframe-content.html"></iframe>
        <p>
          <button id="deactivate-iframe" aria-describedby="iframe-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/iframe.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-in-iframe">
      <h2 id="in-iframe-heading"> working inside an iframe</h2>
      <p>
        This focus trap can be executed inside an iframe. You should be able
        to trap the focus inside. You need to have provided the iframe
        document to the focus-trap before for things to work as expected.
      </p>
      <p>
        ⚠️ As it executes inside the iframe, it cannot prevent clicks on links
        in the parent document. This is the same drawback as you might experience
        when putting a focus-trap <a href="#demo-in-open-shadow-dom">inside a Shadow DOM</a>.
      </p>
      <p>
        <button id="activate-in-iframe" aria-describedby="in-iframe-heading">
          activate trap
        </button>
      </p>
      <iframe
        id="in-iframe"
        src="./in-iframe-content.html"
        class="demo-iframe"
        aria-describedby="iframe-heading"
      ></iframe>
      <p>
        <a
          href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/in-iframe.js"
          >View demo source <span aria-hidden="true">&gt;&gt;</span></a
        >
      </p>
    </div>

    <!--
    NOTE: For reason I cannot explain, putting the HTML for this demo after the
     HTML for the #demo-multipleelements-multipletraps demo will cause the deactivation
     of the second trap in the #demo-multipleelements-multipletraps to fail, but
     only when running under Cypress. A moment of silence for the hours lost on this...
     ¯\_(ツ)_/¯
    -->
    <div id="demo-in-open-shadow-dom">
      <h2 id="in-open-shadow-dom-heading">inside an open shadow dom</h2>
      <p>
        This focus trap is instantiated <em>inside</em> an <strong>open</strong>
        <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="blank" rel="noreferrer">Shadow DOM</a>.
        Some users of this library use Web Components to create things like modal dialogs,
        which means focus needs to be trapped inside the Shadow DOM instance.
      </p>
      <p>
        When the mouse is clicked on an element inside an <strong>open</strong> Shadow DOM,
        the target node in <code>event.target</code> is always the shadow host (the node to
        which the shadow is attached). Fortunately, <code>event.composedPath()</code>, a
        modern API on the event object, allows focus-trap to determine the actual node that
        was clicked inside the shadow.
      </p>
      <p>
        ⚠️ focus-trap is unable to work with closed Shadow DOMs because
        <code>event.composedPath()</code> can't see inside it. In this case, both this
        modern API and <code>event.target</code> point to the shadow host as the actual
        element that was clicked, and focus-trap will always determine that the click was
        outside the trap (and either prevent it, or always deactivate the trap when the
        <code>clickOutsideDeactivates</code> option is true).
      </p>
      <p>
        ⚠️ See the
        <a href="https://github.com/focus-trap/focus-trap#shadow-dom-and-selector-strings">
          warning about selector string options
        </a>
        when putting a focus trap <strong>inside</strong> an open Shadow DOM.
      </p>
      <p>
        <button id="activate-in-open-shadow-dom" aria-describedby="in-open-shadow-dom-heading">
          activate trap
        </button>
      </p>
      <focus-trap-modal></focus-trap-modal>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/in-open-shadow-dom.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-with-shadow-dom">
      <h2 id="with-shadow-dom-heading">with shadow dom</h2>
      <p>
        This focus trap <em>contains</em> tabbable elements that are <strong>inside</strong>
        open and closed Shadow DOMs. It configures <code>tabbable</code> to look for Shadow DOM
        elements and provides a reference to the closed Shadow when requested.
      </p>
      <p>
        <button id="activate-with-shadow-dom" aria-describedby="with-shadow-dom-heading">
          activate trap
        </button>
      </p>
      <div id="with-shadow-dom" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <open-shadow-test></open-shadow-test>
        <div id="with-shadow-dom-closed-shadow"></div>
        <p>
          <button id="deactivate-with-shadow-dom" aria-describedby="with-shadow-dom-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/with-shadow-dom.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-allowoutsideclick">
      <h2 id="allowoutsideclick-heading">allowOutsideClick option</h2>
      <p>
        This focus trap can be closed also by clicking a button outside of the trap <strong>that is able to control the trap</strong> (which is the "activate trap" button in this example). ESC is <strong>disabled</strong> for this trap.
      </p>
      <p>
        NOTE: This is different from the <a href="#clickoutsidedeactivates-heading">clickOutsideDeactivates</a> where merely clicking outside the trap would cause it to be deactivated. In this example, the outside click must take place on the "activate/deactivate trap" button, whose click event handler will programmatically deactivate the trap.
      </p>
      <p>
        <label>
          Set <code>allowOutsideClick</code> as:
          <select id="select-allowoutsideclick">
            <option value="boolean">Boolean</option>
            <option value="function">Function</option>
          </select>
        </label>
      </p>
      <p>
        <button id="activate-allowoutsideclick" aria-describedby="allowoutsideclick-heading">
          activate/deactivate trap
        </button>
      </p>
      <div id="allowoutsideclick" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-allowoutsideclick" aria-describedby="allowoutsideclick-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/allow-outside-click.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-clickoutsidedeactivates">
      <h2 id="clickoutsidedeactivates-heading">clickOutsideDeactivates option</h2>
      <p>
        This focus trap can be closed simply by <strong>clicking anywhere outside</strong>, and the click outside will also go through and do what it was intentionally dispatched to do (like toggling the checkbox). ESC is <strong>disabled</strong> for this trap.
      </p>
      <p>
        The <code>returnFocusOnDeactivate</code> option controls whether focus should be returned to the last-focused element when the trap was activated (the "activate trap" button in this demo) or not:
      </p>
      <ul>
        <li>If this option is <code>true</code> (the default behavior), <em>even if</em> you click on a focusable node outside the trap (like the checkbox), while the click will go through to toggle the checkbox, it will <strong>not</strong> be focused once the trap is fully deactivated. Focus will return to the "activate trap" button.</li>
        <li>If <code>false</code>, then it doesn't matter what you click on (focusable or not), focus will go away from the trap to where you clicked, or to nowhere if you clicked on something not focusable (like the page/document or a heading). So if you click on the checkbox, it will remain focused once the trap is fully deactivated.</li>
      </ul>
      <p>
        <label>
          Set <code>clickOutsideDeactivates</code> as:
          <select id="select-clickoutsidedeactivates">
            <option value="boolean">Boolean</option>
            <option value="function">Function</option>
          </select>
        </label>
      </p>
      <p>
        <label>
          Set <code>returnFocusOnDeactivate</code> as:
          <select id="select-returnfocusondeactivate-clickoutsidedeactivates">
            <option value="true">true</option><!-- default -->
            <option value="false">false</option>
          </select>
        </label>
      </p>
      <p>
        <button id="activate-clickoutsidedeactivates" aria-describedby="clickoutsidedeactivates-heading">
          activate trap
        </button>
      </p>
      <p>
        <label>
          Toggling me causes auto-deactivation of the trap:
          <input type="checkbox" id="checkbox-clickoutsidedeactivates" />
        </label>
      </p>
      <div id="clickoutsidedeactivates" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button>
            nothing
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/click-outside-deactivates.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-setreturnfocus">
      <h2 id="setreturnfocus-heading">setReturnFocus option</h2>
      <p>
        With setReturnFocus it is possible to overwrite the returnFocusElement.
      </p>
      <p>
        <button id="activate-setreturnfocus" aria-describedby="setreturnfocus-heading">
          activate trap
        </button>
        <button id="overwritten-element">Element to return</button>
      </p>
      <div id="setreturnfocus" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a>
          <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-setreturnfocus" aria-describedby="setreturnfocus-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/set-return-focus.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-setreturnfocus-function">
      <h2 id="setreturnfocus-function-heading">setReturnFocus as function</h2>
      <p>
        As the function is executed in the process of deactivation, it allows you to dynamically specify which element should be focused after deactivation.
      </p>
      <p>
        Once the trap is activated, you can still click on one of the 3 deactivate buttons below in order to deactivate the trap.
      </p>
      <p>
        <button id="activate-setreturnfocus-function" aria-describedby="setreturnfocus-function-heading">
          activate trap
        </button>
        <p id="deactivate-setreturnfocus-function">
          <button id="focus-this">
            deactivate and focus this
          </button>
          <button id="focus-initial">
            deactivate and focus 'activate trap'
          </button>
          <button id="no-focus">
            deactivate and no change in focus
          </button>
        </p>
      </p>
      <div id="setreturnfocus-function" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a>
          <a href="#">focusable</a> parts.
        </p>
      </div>
      <p>
        <a
          href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/set-return-focus-function.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>
    <div id="demo-multipleelements">
      <h2 id="multipleelements-heading">multiple elements</h2>
      <p>
        You can pass multiple elements, and the focus will be kept within those element
        boundaries (darker color). Clicking outside deactivates.
      </p>
      <p>
        <button id="activate-multipleelements" aria-describedby="multipleelements-heading">
          activate trap
        </button>
      </p>
      <div id="multipleelements" class="trap">
        <p id="multipleelements-1">
          Here is a focus trap <a href="#">with</a> <a href="#">some</a>
          <a href="#">focusable</a> parts.
        </p>
        <p id="multipleelements-2">
          Here is <a href="#">something</a>.
        </p>
        <p id="multipleelements-3">
          Here is a another focus trap element. <a href="#">See</a> <a href="#">how</a>
          it <a href="#">works</a>.
        </p>
        <p>
          <button id="deactivate-multipleelements" aria-describedby="multipleelements-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/multiple-elements.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-multipleelements-delete">
      <h2 id="multipleelements-delete-heading">multiple elements with delete</h2>
      <p>
        Pass multiple elements. Update the tabbable nodes in any of those elements
        on the fly, ensuring there's always at least one container with at least
        one tabbable node in it at all times.
      </p>
      <p>
        <button id="activate-multipleelements-delete" aria-describedby="multipleelements-delete-heading">
          activate trap
        </button>
      </p>
      <div id="multipleelements-delete" class="trap">
        <div id="multipleelements-delete-1">
          <p style="margin-top: 0">Container 1</p>
          <button id="multipleelements-delete-removed-node">Gets removed</button>
        </div>
        <div id="multipleelements-delete-2">
          <p>Container 2</p>
          <button id="multipleelements-delete-remove">Remove button</button>
          <a href="#">Some</a>
          <a href="#">other</a>
          <a href="#">focusable</a> parts.
        </div>
        <div>
          <p>Not in trap (clicks allowed)</p>
          <button id="deactivate-multipleelements-delete" aria-describedby="multipleelements-delete-heading">
            deactivate trap
          </button>
        </div>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/multiple-elements-delete.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-multipleelements-delete-all">
      <h2 id="multipleelements-delete-all-heading">multiple elements with delete ALL</h2>
      <p>
        Pass multiple elements. With the <strong>fallbackFocus</strong> option configured
        to the "deactivate trap" button, remove ALL nodes in all trap containers to have
        the focus <em>fall back</em> to the "deactivate" button on the next tab key press.
      </p>
      <p>
        <button id="activate-multipleelements-delete-all" aria-describedby="multipleelements-delete-all-heading">
          activate trap
        </button>
      </p>
      <div id="multipleelements-delete-all" class="trap">
        <div id="multipleelements-delete-all-1">
          <p style="margin-top: 0">Container 1</p>
          <button id="multipleelements-delete-all-removed-node">Gets removed</button>
        </div>
        <div id="multipleelements-delete-all-2">
          <p>Container 2</p>
          <button id="multipleelements-delete-all-remove">Remove all button</button>
        </div>
        <div>
          <p>Not in trap (fallback; clicks allowed)</p>
          <button id="deactivate-multipleelements-delete-all" aria-describedby="multipleelements-delete-all-heading">
            deactivate trap
          </button>
        </div>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/multiple-elements-delete-all.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-multipleelements-multipletraps">
      <h2 id="multipleelements-multipletraps-heading">multiple traps with multiple elements</h2>
      <p>
        You can have multiple traps with multiple elements. Each trap's elements are in a
        darker color when their associated trap is active. Clicking outside on the activate
        and deactivate trap buttons is allowed.
      </p>
      <p>
        <button id="activate-multipleelements-multipletraps-1" class="enable-outside" aria-describedby="multipleelements-multipletraps-heading">
          activate trap 1
        </button>
        <button id="activate-multipleelements-multipletraps-2" class="enable-outside" aria-describedby="multipleelements-multipletraps-heading">
          activate trap 2
        </button>
      </p>
      <div id="multipleelements-multipletraps" class="trap">
        <p id="multipleelements-multipletraps-1" style="margin-top: 0">
          Here is a focus trap <a href="#">with</a> <a href="#">some</a>
          <a href="#">focusable</a> parts.
        </p>
        <p id="multipleelements-multipletraps-2">
          Here is <a href="#">something</a>.
        </p>
        <p id="multipleelements-multipletraps-3">
          Here is a another focus trap element. <a href="#">See</a> <a href="#">how</a>
          it <a href="#">works</a>.
        </p>
        <p id="multipleelements-multipletraps-4">
          Here is the <a href="#">last</a> trap <a href="#">area</a>.
        </p>
        <p>
          <button id="deactivate-multipleelements-multipletraps-1" class="enable-outside" aria-describedby="multipleelements-multipletraps-heading">
            deactivate trap 1
          </button>
          <button id="deactivate-multipleelements-multipletraps-2" class="enable-outside" aria-describedby="multipleelements-multipletraps-heading">
            deactivate trap 2
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/multiple-elements-multiple-traps.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-negative-tabindex">
      <h2 id="negative-tabindex-heading">Negative tabindex</h2>
      <p>
        This trap has an element with a negative tabindex <strong>in the middle</strong>,
        which means that element is <em>focusable</em> but not <em>tabbable</em>. Use the mouse
        to set focus to it. Once it has focus, you can still use the tab key to go forward or
        backward in the normal tab order.
      </p>
      <p>
        <button id="activate-negative-tabindex" aria-describedby="negative-tabindex-heading">
          activate trap
        </button>
      </p>
      <div id="negative-tabindex" class="trap">
        <p>
          <button id="deactivate-negative-tabindex" aria-describedby="negative-tabindex-heading">
            deactivate trap
          </button>
        </p>
        <p>
          <button>tabindex unset</button>
        </p>
        <p>
          <!--
            NOTE: It's important that the negative tabindex button NOT be LAST because there
            was a bug that prevented normal forward tab movement once it had focus.
            @see https://github.com/focus-trap/focus-trap/issues/611
          -->
          <button tabindex="-1">tabindex = -1</button>
        </p>
        <p>
          <button>tabindex unset</button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/negative-tabindex.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-negative-tabindex-last">
      <h2 id="negative-tabindex-last-heading">Negative tabindex last</h2>
      <p>
        This trap has an element with a negative tabindex and it's the <strong>last element</strong>,
        which means that element is <em>focusable</em> but not <em>tabbable</em>. Use the mouse to set
        focus to it. Once it has focus, you can still use the tab key to go forward or backward in
        the normal tab order.
      </p>
      <p>
        <button id="activate-negative-tabindex-last" aria-describedby="negative-tabindex-last-heading">
          activate trap
        </button>
      </p>
      <div id="negative-tabindex-last" class="trap">
        <p>
          <button id="deactivate-negative-tabindex-last" aria-describedby="negative-tabindex-last-heading">
            deactivate trap
          </button>
        </p>
        <p>
          <button>tabindex unset</button>
        </p>
        <p>
          <button>tabindex unset</button>
        </p>
        <p>
          <!--
            NOTE: It's important that the negative tabindex button be LAST because there
            was a bug that prevented forward tab movement once it had focus, but only
            when it was last in tab order.
            @see https://github.com/focus-trap/focus-trap/issues/565
          -->
          <button tabindex="-1">tabindex = -1</button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/negative-tabindex.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-positive-tabindex">
      <h2 id="positive-tabindex-heading">Positive tabindex</h2>
      <p>
        This trap has 3 buttons which have a positive (greater than 0) tabindex attribute.
        Per tab order rules, they should get focused first (in 1-2-3 order tabbing forward),
        then all tabbable nodes without a tabindex attribute (the 3 links, "tabindex 0" and
        "tabindex ?") should get focused in document position order. The same should happen in
        reverse when shift+tabbing.
      </p>
      <p>
        ❗️ Positive tabindex support is <strong>limited to single-container traps</strong>. It
        is also not 100% accurate to browser behavior in one edge case, which is when tabbing
        <em>from</em> a negative tabindex node (focusable, not tabbable). In this case,
        browsers will set focus to the next tabbable node in <em>document position</em> order,
        regardless of <code>tabindex</code> value (zero or positive). Focus-trap, however, will
        set focus to the next tabbable node in <em>DOM</em> order. Most of the time, the
        result will be the same, but there may be slight differences.
      </p>
      <p>
        ⚠️ Using positive tab indexes
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex#accessibility_concerns" target="_blank">is not recommended</a>,
        primarily for accessibility reasons.
      </p>
      <p>
        ⚠️ Tabbing from the last positive tabindex node leading to a zero/default tabindex node
        will cause a <strong>momentary focus escape</strong> which focus-trap will identify and rectify
        to keep tab order working as expected. This momentary escape, however, means some node outside
        the trap will get focused before focus-trap is able to pull focus back into the trap. If that
        node is out of view, this may cause the window to scroll to it, not to mention the
        <code>focus</code> event this outside node will unavoidably receive.
      </p>
      <p>
        <button id="activate-positive-tabindex" aria-describedby="positive-tabindex-heading">
          activate trap
        </button>
      </p>
      <div id="positive-tabindex" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button tabindex="0">tabindex 0</button>
          <button tabindex="1">tabindex 1</button>
          <button tabindex="-1">tabindex -1</button>
          <button tabindex="3">tabindex 3</button>
          <button tabindex="2">tabindex 2</button>
          <button>tabindex ?</button>
        </p>
        <p>
          <button id="deactivate-positive-tabindex" aria-describedby="positive-tabindex-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/positive-tabindex.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-with-open-web-component">
      <h2 id="with-open-web-component-heading">With open web component</h2>
      <p>
        This trap contains an element which is defined in an open web component (i.e. a web component
        with an open Shadow DOM).
      </p>
      <p>
        <button id="activate-with-open-web-component" aria-describedby="with-open-web-component-heading">
          activate trap
        </button>
      </p>
      <div id="with-open-web-component" class="trap">
        <!-- content generated from JavaScript -->
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/with-open-web-component.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-global-trap-stack">
      <h2 id="global-trap-stack-heading">Global trap stack</h2>
      <p>
        Use window to have access to trap stack. This allows to have more than one focus-trap library version in the same page.
      </p>
      <p>
        <button id="activate-global-trap-stack" aria-describedby="global-trap-stack-heading">
          activate trap
        </button>
      </p>
      <div id="global-trap-stack" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          Active traps: <span class="counter"></span>
        </p>
        <p>
          <button id="deactivate-global-trap-stack" aria-describedby="global-trap-stack-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/global-trap-stack.js.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-arrow-keys">
      <h2 id="arrow-keys-heading">Customized keyboard navigation</h2>
      <p>
        This trap uses the <code>isKeyForward()</code> and <code>isKeyBackward()</code>
        options to enable the <strong>use of the <code>j</code> (backward) and <code>k</code> (forward)
        keys</strong> to navigate the trapped elements using the keyboard.
      </p>
      <p>
        💬 The <code>tab</code> key still works, but not completely, as it's no longer managed by
        the trap. To make full use of these options, the <code>tab</code> key should be
        suppressed entirely or handled differently. You might use these options in a dropdown
        list where you're moving focus between items using the arrow keys while reserving the
        <code>tab</code> key for moving beyond the dropdown itself.
      </p>
      <p>
        <button id="activate-arrow-keys" aria-describedby="arrow-keys-heading">
          activate trap
        </button>
      </p>
      <div id="arrow-keys" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          <button id="deactivate-arrow-keys" aria-describedby="arrow-keys-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/arrow-keys.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <div id="demo-inert">
      <h2 id="inert-heading">works with inert elements</h2>
      <p>
        This trap contains an
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inert" target="_blank">inert</a>
        button. Browsers that support this new HTML attribute will render it completely non-interactive,
        and focus-trap will ignore it too.
      </p>
      <p>
        ⚠️ Check the
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inert#browser_compatibility" target="_blank">browser compatibility</a>
        for the browser you're using right now before trying this demo. It will not work properly
        if your browser doesn't support the <code>inert</code> attribute.
      </p>
      <p>
        <button id="activate-inert" aria-describedby="inert-heading">
          activate trap
        </button>
      </p>
      <div id="inert" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          It will avoid this inert button: <button inert>inert</button>
        </p>
        <p>
          <button id="deactivate-inert" aria-describedby="inert-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/default.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>


    <div id="demo-dom-remove">
      <h2 id="dom-remove-heading">Keeps focus when removing DOM elements</h2>
      <p>
        <a href="https://amberwilson.co.uk/blog/where-did-the-focus-go/">If the currently focused elemented is removed from the DOM, the
        focus can move to the document <code>body</code></a>.
      </p>
      <p>
        focus-trap ensures that focus remains within the trap.
      </p>
      <p>
        <button id="activate-dom-remove" aria-describedby="dom-remove-heading">
          activate trap
        </button>
      </p>
      <div id="dom-remove" class="trap">
        <p>
          Here is a focus trap <a href="#">with</a> <a href="#">some</a> <a href="#">focusable</a> parts.
        </p>
        <p>
          This button will be removed when clicking it: <button id="dom-remove-button">remove</button>
        </p>
        <p>
          Reload the page to make the button reappear.
        </p>
        <p>
          <button id="deactivate-dom-remove" aria-describedby="dom-remove-heading">
            deactivate trap
          </button>
        </p>
      </div>
      <p>
        <a href="https://github.com/focus-trap/focus-trap/blob/master/docs/js/dom-remove.js">View demo source <span aria-hidden="true">&gt;&gt;</span></a>
      </p>
    </div>

    <p>
      <span aria-hidden="true" style="font-size:2em;vertical-align:middle;">☜</span>
      <a href="https://github.com/focus-trap/focus-trap" style="vertical-align:middle;">Return to the repository</a>
    </p>
  </main>
  <script>
    const url = new URL(window.location);
    // 'cypress', or null, depending on rollup.config.js `serve().openPage` config
    const bundleType = url.searchParams.get('bundle');
    // file names are dependent upon rollup.config.js `output.file` config, which depends on
    //  `process.env` at the time the bundle was built
    const bundleName = `demo-bundle${['cypress'].includes(bundleType) ? `-${bundleType}` : ''}.js`;

    const scriptEl = document.createElement('script');
    scriptEl.src = bundleName;
    document.body.appendChild(scriptEl);
  </script>
</body>
</html>
